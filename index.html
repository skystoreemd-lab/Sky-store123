<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sky Store - Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
        :root { --bg-color: #05070a; --neon-blue: #00d4ff; --accent-purple: #7000ff; }
        body { background-color: var(--bg-color); color: white; font-family: 'Cairo', sans-serif; overflow-x: hidden; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.05); }
        .page { display: none; animation: fadeIn 0.5s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .product-card:hover { transform: translateY(-5px); border-color: var(--neon-blue); }
        .badge { padding: 2px 8px; border-radius: 20px; font-size: 10px; font-weight: bold; }
        .slider-container { display: flex; transition: transform 0.5s ease-in-out; }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="fixed top-0 w-full z-50 glass px-6 py-4 flex justify-between items-center">
        <div class="text-2xl font-bold text-[#00d4ff] cursor-pointer" onclick="showPage('home')">Sky Store</div>
        <div class="flex items-center gap-4">
            <div id="cartBtn" class="relative cursor-pointer" onclick="showPage('cart')">
                <span class="text-xl">ğŸ›’</span>
                <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-[10px] rounded-full w-4 h-4 flex items-center justify-center">0</span>
            </div>
            <div class="cursor-pointer text-2xl" onclick="toggleMenu()">â˜°</div>
        </div>
    </nav>

    <!-- Side Menu -->
    <div id="sideMenu" class="fixed top-0 -right-full w-64 h-full bg-[#0a0c10] z-[60] transition-all duration-300 p-8">
        <div class="text-right text-2xl cursor-pointer mb-8" onclick="toggleMenu()">âœ•</div>
        <a href="#" onclick="showPage('home')" class="block py-3 border-b border-white/5">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        <a href="#" onclick="showPage('orders_status')" class="block py-3 border-b border-white/5">Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</a>
        <a href="https://wa.me/9647703841572" class="block py-3 border-b border-white/5">Ø§Ù„Ù…Ø·ÙˆØ± Ø¹Ø²Ø§Ù„Ø¯ÙŠÙ† Ø¬Ø³Ø§Ù…</a>
        <a href="#" onclick="showAdminLogin()" class="block py-3 mt-10 opacity-30">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</a>
    </div>

    <div class="container mx-auto px-4 pt-24 pb-10 min-h-screen flex flex-col">
        
        <!-- Welcome Section -->
        <div id="welcomeMsg" class="text-center mb-6 text-[#00d4ff] font-bold"></div>

        <!-- Page: Home -->
        <div id="page_home" class="page active">
            <!-- Slider -->
            <div class="w-full overflow-hidden mb-8 rounded-3xl h-48 relative glass">
                <div id="mainSlider" class="slider-container h-full">
                    <!-- Slider images loaded via JS -->
                </div>
            </div>

            <h2 class="text-xl mb-6 border-r-4 border-[#00d4ff] pr-3">Ø£Ø­Ø¯Ø« Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
            <div id="productsGrid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <!-- Products loaded via JS -->
            </div>
            
            <div class="mt-10 text-center text-gray-500 text-sm">
                Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙƒÙ„ÙŠ: <span id="fakeOrders" class="text-purple-500 font-bold">15,000</span>
            </div>
        </div>

        <!-- Page: Cart -->
        <div id="page_cart" class="page">
            <h2 class="text-2xl mb-6 text-center">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚</h2>
            <div id="cartItems" class="space-y-4 mb-8"></div>
            <div id="cartTotal" class="text-xl font-bold text-center mb-6"></div>
            <button onclick="startCheckout()" class="w-full bg-[#0077ff] py-4 rounded-xl font-bold">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</button>
            <button onclick="showPage('home')" class="w-full mt-4 text-gray-400">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³ÙˆÙ‚</button>
        </div>

        <!-- Page: Checkout Steps -->
        <div id="page_checkout" class="page">
            <div id="checkoutSteps">
                <div id="step_phone" class="step">
                    <label class="block mb-4 text-[#00d4ff]">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label>
                    <input type="tel" id="phone" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl text-right" placeholder="07XXXXXXXX">
                    <button onclick="valStep('phone', 'gov')" class="w-full bg-[#0077ff] py-4 rounded-xl mt-6 font-bold">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                </div>
                <div id="step_gov" class="step hidden">
                    <label class="block mb-4 text-[#00d4ff]">Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</label>
                    <select id="gov" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl text-right">
                        <option value="Ø¨ØºØ¯Ø§Ø¯">Ø¨ØºØ¯Ø§Ø¯</option><option value="Ø§Ù„Ø¨ØµØ±Ø©">Ø§Ù„Ø¨ØµØ±Ø©</option><option value="Ù†ÙŠÙ†ÙˆÙ‰">Ù†ÙŠÙ†ÙˆÙ‰</option>
                        <option value="Ø§Ù„Ø£Ù†Ø¨Ø§Ø±">Ø§Ù„Ø£Ù†Ø¨Ø§Ø±</option><option value="ÙƒØ±Ø¨Ù„Ø§Ø¡">ÙƒØ±Ø¨Ù„Ø§Ø¡</option><option value="Ø§Ù„Ù†Ø¬Ù">Ø§Ù„Ù†Ø¬Ù</option>
                        <option value="Ø°ÙŠ Ù‚Ø§Ø±">Ø°ÙŠ Ù‚Ø§Ø±</option><option value="Ù…ÙŠØ³Ø§Ù†">Ù…ÙŠØ³Ø§Ù†</option><option value="ÙˆØ§Ø³Ø·">ÙˆØ§Ø³Ø·</option>
                        <option value="Ø¨Ø§Ø¨Ù„">Ø¨Ø§Ø¨Ù„</option><option value="Ø¯ÙŠØ§Ù„Ù‰">Ø¯ÙŠØ§Ù„Ù‰</option><option value="ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†">ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙŠÙ†</option>
                        <option value="ÙƒØ±ÙƒÙˆÙƒ">ÙƒØ±ÙƒÙˆÙƒ</option><option value="Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©">Ø§Ù„Ø³Ù„ÙŠÙ…Ø§Ù†ÙŠØ©</option><option value="Ø£Ø±Ø¨ÙŠÙ„">Ø£Ø±Ø¨ÙŠÙ„</option>
                        <option value="Ø¯Ù‡ÙˆÙƒ">Ø¯Ù‡ÙˆÙƒ</option><option value="Ø§Ù„Ù…Ø«Ù†Ù‰">Ø§Ù„Ù…Ø«Ù†Ù‰</option><option value="Ø§Ù„Ù‚Ø§Ø¯Ø³ÙŠØ©">Ø§Ù„Ù‚Ø§Ø¯Ø³ÙŠØ©</option>
                    </select>
                    <button onclick="valStep('gov', 'area')" class="w-full bg-[#0077ff] py-4 rounded-xl mt-6 font-bold">Ø§Ù„ØªØ§Ù„ÙŠ</button>
                </div>
                <div id="step_area" class="step hidden">
                    <label class="block mb-4 text-[#00d4ff]">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</label>
                    <input type="text" id="area" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl text-right" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø·Ù‚Ø©...">
                    <button onclick="submitOrder()" class="w-full bg-[#00ff88] text-black py-4 rounded-xl mt-6 font-bold">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</button>
                </div>
            </div>
        </div>

        <!-- Admin Login -->
        <div id="page_admin_login" class="page">
            <h2 class="text-2xl mb-6 text-center">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
            <input type="password" id="adminPass" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl text-right mb-4" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
            <button onclick="loginAdmin()" class="w-full bg-purple-600 py-4 rounded-xl font-bold">Ø¯Ø®ÙˆÙ„</button>
        </div>

        <!-- Admin Dashboard -->
        <div id="page_admin" class="page">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
                <button onclick="logoutAdmin()" class="text-red-500 text-sm">Ø®Ø±ÙˆØ¬</button>
            </div>
            
            <!-- Tabs -->
            <div class="flex gap-2 mb-6 overflow-x-auto pb-2">
                <button onclick="showAdminTab('orders')" class="admin-tab bg-[#00d4ff] text-black px-4 py-2 rounded-lg text-sm font-bold">Ø§Ù„Ø·Ù„Ø¨Ø§Øª</button>
                <button onclick="showAdminTab('products')" class="admin-tab bg-white/5 px-4 py-2 rounded-lg text-sm">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</button>
                <button onclick="showAdminTab('slider')" class="admin-tab bg-white/5 px-4 py-2 rounded-lg text-sm">Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±</button>
                <button onclick="showAdminTab('add_product')" class="admin-tab bg-white/5 px-4 py-2 rounded-lg text-sm">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
            </div>

            <!-- Tab: Orders -->
            <div id="tab_orders" class="admin-tab-content">
                <div id="adminOrders" class="space-y-4"></div>
            </div>

            <!-- Tab: Products List -->
            <div id="tab_products" class="admin-tab-content hidden">
                <div id="adminProductsList" class="space-y-4"></div>
            </div>

            <!-- Tab: Slider Management -->
            <div id="tab_slider" class="admin-tab-content hidden">
                <div class="glass p-6 rounded-2xl mb-6">
                    <h3 class="mb-4">Ø¥Ø¶Ø§ÙØ© ØµÙˆØ±Ø© Ù„Ù„Ø³Ù„Ø§ÙŠØ¯Ø±</h3>
                    <input type="file" id="slider_file" class="w-full mb-4 text-sm">
                    <button onclick="uploadSliderImage()" class="w-full bg-[#00d4ff] text-black py-2 rounded-xl font-bold">Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©</button>
                </div>
                <div id="adminSliderList" class="grid grid-cols-2 gap-4"></div>
            </div>

            <!-- Tab: Add Product -->
            <div id="tab_add_product" class="admin-tab-content hidden">
                <div class="glass p-6 rounded-2xl space-y-4">
                    <input type="text" id="p_name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" class="w-full bg-white/5 border border-white/10 p-3 rounded-xl text-right">
                    <input type="number" id="p_price" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ (Ø¯.Ø¹)" class="w-full bg-white/5 border border-white/10 p-3 rounded-xl text-right">
                    <input type="number" id="p_discount" placeholder="Ø§Ù„Ø³Ø¹Ø± Ù‚Ø¨Ù„ Ø§Ù„Ø®ØµÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)" class="w-full bg-white/5 border border-white/10 p-3 rounded-xl text-right">
                    <input type="number" id="p_stock" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø©" class="w-full bg-white/5 border border-white/10 p-3 rounded-xl text-right">
                    <div class="text-sm text-gray-400">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬:</div>
                    <input type="file" id="p_file" class="w-full text-sm">
                    <button onclick="saveProduct()" class="w-full bg-[#00ff88] text-black py-3 rounded-xl font-bold">Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬</button>
                </div>
            </div>
        </div>

        <footer class="mt-auto pt-10 text-center text-gray-600 text-xs">
            Sky Store &copy; 2026 | Ø§Ù„Ù…Ø·ÙˆØ± <a href="https://wa.me/9647703841572" class="text-[#00d4ff]">Ø¹Ø²Ø§Ù„Ø¯ÙŠÙ† Ø¬Ø³Ø§Ù…</a>
        </footer>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModal" class="fixed inset-0 bg-black/95 z-[100] flex items-center justify-center p-6 hidden">
        <div class="glass p-8 rounded-3xl w-full max-w-sm text-center">
            <h3 class="text-[#00d4ff] text-xl mb-4">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Sky Store</h3>
            <input type="text" id="userNameInput" class="w-full bg-white/5 border border-white/10 p-4 rounded-xl text-right mb-4" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
            <button onclick="saveUser()" class="w-full bg-[#0077ff] py-4 rounded-xl font-bold">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØ¬Ø±</button>
        </div>
    </div>

    <script>
        let cart = [];
        let allProducts = [];
        let sliderImages = [];
        let currentSlide = 0;

        window.onload = () => {
            const name = localStorage.getItem('sky_name');
            if(!name) document.getElementById('welcomeModal').classList.remove('hidden');
            else document.getElementById('welcomeMsg').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒØŒ ${name} ğŸ‘‹`;
            loadData();
            updateFakeOrders();
            setInterval(nextSlide, 5000);
        };

        async function loadData() {
            const [pRes, sRes] = await Promise.all([fetch('/api/products'), fetch('/api/slider')]);
            allProducts = await pRes.json();
            sliderImages = await sRes.json();
            renderProducts();
            renderSlider();
        }

        function renderSlider() {
            const slider = document.getElementById('mainSlider');
            if(sliderImages.length === 0) {
                slider.innerHTML = '<div class="w-full h-full flex items-center justify-center text-gray-500">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ± ÙÙŠ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø±</div>';
                return;
            }
            slider.innerHTML = sliderImages.map(img => `
                <img src="${img}" class="w-full h-full object-cover flex-shrink-0">
            `).join('');
            slider.style.width = `${sliderImages.length * 100}%`;
            document.querySelectorAll('#mainSlider img').forEach(img => img.style.width = `${100 / sliderImages.length}%`);
        }

        function nextSlide() {
            if(sliderImages.length <= 1) return;
            currentSlide = (currentSlide + 1) % sliderImages.length;
            document.getElementById('mainSlider').style.transform = `translateX(${currentSlide * (100 / sliderImages.length)}%)`;
        }

        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = allProducts.map(p => {
                const hasDiscount = p.discount && p.discount > p.price;
                return `
                <div class="product-card glass p-3 rounded-2xl border border-white/5 transition-all relative">
                    ${p.stock < 5 && p.stock > 0 ? `<span class="absolute top-2 left-2 bg-red-500 badge">Ø¨Ù‚ÙŠ ${p.stock}</span>` : ''}
                    ${p.stock <= 0 ? `<span class="absolute top-2 left-2 bg-gray-600 badge">Ù†ÙØ¯</span>` : ''}
                    <img src="${p.img}" class="w-full h-32 object-cover rounded-xl mb-3">
                    <h3 class="text-sm font-bold mb-1 truncate">${p.name}</h3>
                    <div class="flex items-center gap-2 mb-3">
                        <span class="text-[#00d4ff] font-bold text-sm">${p.price.toLocaleString()} Ø¯.Ø¹</span>
                        ${hasDiscount ? `<span class="text-gray-500 line-through text-[10px]">${p.discount.toLocaleString()}</span>` : ''}
                    </div>
                    <button onclick="addToCart(${p.id})" class="w-full bg-white/5 hover:bg-[#0077ff] py-2 rounded-lg text-xs transition-colors">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
                </div>
            `}).join('');
        }

        function addToCart(id) {
            const p = allProducts.find(x => x.id === id);
            if(p.stock <= 0) return alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…Ù†ØªØ¬ Ù†ÙØ¯ Ù…Ù† Ø§Ù„Ù…Ø®Ø²Ù†');
            cart.push(p);
            document.getElementById('cartCount').innerText = cart.length;
            alert('ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© âœ…');
        }

        function renderCart() {
            const container = document.getElementById('cartItems');
            if(cart.length === 0) {
                container.innerHTML = '<p class="text-center text-gray-500">Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</p>';
                document.getElementById('cartTotal').innerText = '';
                return;
            }
            container.innerHTML = cart.map((item, index) => `
                <div class="glass p-4 rounded-xl flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <img src="${item.img}" class="w-12 h-12 rounded-lg object-cover">
                        <div>
                            <div class="font-bold text-sm">${item.name}</div>
                            <div class="text-[#00d4ff] text-xs">${item.price.toLocaleString()} Ø¯.Ø¹</div>
                        </div>
                    </div>
                    <button onclick="removeFromCart(${index})" class="text-red-500 text-xs">Ø­Ø°Ù</button>
                </div>
            `).join('');
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            document.getElementById('cartTotal').innerText = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${total.toLocaleString()} Ø¯.Ø¹`;
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            document.getElementById('cartCount').innerText = cart.length;
            renderCart();
        }

        function saveUser() {
            const name = document.getElementById('userNameInput').value;
            if(name) {
                localStorage.setItem('sky_name', name);
                document.getElementById('welcomeModal').classList.add('hidden');
                document.getElementById('welcomeMsg').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒØŒ ${name} ğŸ‘‹`;
            }
        }

        function toggleMenu() { document.getElementById('sideMenu').classList.toggle('-right-full'); document.getElementById('sideMenu').classList.toggle('right-0'); }

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page_' + id).classList.add('active');
            if(id === 'cart') renderCart();
            window.scrollTo(0,0);
        }

        function startCheckout() { if(cart.length > 0) showPage('checkout'); else alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©'); }

        function valStep(curr, next) {
            const val = document.getElementById(curr).value;
            if(!val) return alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚Ù„');
            document.getElementById('step_' + curr).classList.add('hidden');
            document.getElementById('step_' + next).classList.remove('hidden');
        }

        async function submitOrder() {
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const data = {
                customerName: localStorage.getItem('sky_name'),
                phone: document.getElementById('phone').value,
                gov: document.getElementById('gov').value,
                area: document.getElementById('area').value,
                items: cart.map(i => i.name).join(' + '),
                total: total.toLocaleString() + " Ø¯.Ø¹",
                productIds: cart.map(i => i.id)
            };

            const res = await fetch('/api/order', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            });
            if(res.ok) {
                alert('ØªÙ… ØªØ«Ø¨ÙŠØª Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
                cart = [];
                document.getElementById('cartCount').innerText = 0;
                location.reload();
            }
        }

        // Admin Functions
        function showAdminLogin() { showPage('admin_login'); toggleMenu(); }
        function loginAdmin() {
            if(document.getElementById('adminPass').value === 'azozazoz2009') {
                showPage('admin');
                loadAdminData();
            } else alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø·Ø£');
        }
        function logoutAdmin() { showPage('home'); }

        function showAdminTab(tab) {
            document.querySelectorAll('.admin-tab-content').forEach(c => c.classList.add('hidden'));
            document.getElementById('tab_' + tab).classList.remove('hidden');
            document.querySelectorAll('.admin-tab').forEach(b => {
                b.classList.remove('bg-[#00d4ff]', 'text-black');
                b.classList.add('bg-white/5', 'text-white');
            });
            event.target.classList.add('bg-[#00d4ff]', 'text-black');
            if(tab === 'products') renderAdminProducts();
            if(tab === 'slider') renderAdminSlider();
        }

        async function loadAdminData() {
            const res = await fetch('/api/admin/orders');
            const orders = await res.json();
            document.getElementById('adminOrders').innerHTML = orders.map(o => `
                <div class="glass p-4 rounded-xl text-sm">
                    <div class="flex justify-between mb-2">
                        <span class="font-bold text-[#00d4ff]">${o.customerName}</span>
                        <span class="text-gray-500 text-[10px]">${o.time}</span>
                    </div>
                    <div class="mb-1">ğŸ“¦ ${o.items}</div>
                    <div class="mb-1">ğŸ“ ${o.gov} - ${o.area}</div>
                    <div class="font-bold">ğŸ“ ${o.phone}</div>
                    <div class="mt-2 text-right font-bold text-green-400">${o.total}</div>
                </div>
            `).join('');
        }

        function renderAdminProducts() {
            document.getElementById('adminProductsList').innerHTML = allProducts.map(p => `
                <div class="glass p-4 rounded-xl flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <img src="${p.img}" class="w-10 h-10 rounded-lg object-cover">
                        <div>
                            <div class="font-bold text-sm">${p.name}</div>
                            <div class="text-xs text-gray-400">Ø§Ù„Ù…Ø®Ø²ÙˆÙ†: ${p.stock} | Ø§Ù„Ø³Ø¹Ø±: ${p.price}</div>
                        </div>
                    </div>
                    <button onclick="deleteProduct(${p.id})" class="text-red-500 text-xs">Ø­Ø°Ù</button>
                </div>
            `).join('');
        }

        function renderAdminSlider() {
            document.getElementById('adminSliderList').innerHTML = sliderImages.map((img, idx) => `
                <div class="relative glass rounded-xl overflow-hidden">
                    <img src="${img}" class="w-full h-24 object-cover">
                    <button onclick="deleteSliderImage(${idx})" class="absolute top-1 right-1 bg-red-500 text-white text-[10px] px-2 py-1 rounded">Ø­Ø°Ù</button>
                </div>
            `).join('');
        }

        async function uploadSliderImage() {
            const file = document.getElementById('slider_file').files[0];
            if(!file) return alert('Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹');
            const formData = new FormData();
            formData.append('image', file);
            const res = await fetch('/api/admin/slider', { method: 'POST', body: formData });
            if(res.ok) { loadData(); renderAdminSlider(); alert('ØªÙ… Ø§Ù„Ø±ÙØ¹'); }
        }

        async function deleteSliderImage(idx) {
            const res = await fetch(`/api/admin/slider/${idx}`, { method: 'DELETE' });
            if(res.ok) { loadData(); renderAdminSlider(); }
        }

        async function saveProduct() {
            const file = document.getElementById('p_file').files[0];
            const name = document.getElementById('p_name').value;
            const price = document.getElementById('p_price').value;
            if(!file || !name || !price) return alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©');

            const formData = new FormData();
            formData.append('image', file);
            formData.append('name', name);
            formData.append('price', price);
            formData.append('discount', document.getElementById('p_discount').value || 0);
            formData.append('stock', document.getElementById('p_stock').value || 0);

            const res = await fetch('/api/admin/products', { method: 'POST', body: formData });
            if(res.ok) {
                alert('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬');
                loadData();
                showAdminTab('products');
            }
        }

        async function deleteProduct(id) {
            if(!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) return;
            const res = await fetch(`/api/admin/products/${id}`, { method: 'DELETE' });
            if(res.ok) { loadData(); renderAdminProducts(); }
        }

        function updateFakeOrders() {
            let count = parseInt(localStorage.getItem('fake_orders') || 15000);
            count += 5;
            localStorage.setItem('fake_orders', count);
            document.getElementById('fakeOrders').innerText = count.toLocaleString('ar-IQ');
            setTimeout(updateFakeOrders, 60000);
        }
    </script>
</body>
</html>
